<div th:fragment="content">
    <div class="container mt-4">
        <h3 class="mb-4">Listado de Citas</h3>

        <a th:href="@{/citas/nuevo}" class="btn btn-primary mb-3">
            <i class="bi bi-plus-circle"></i> Nueva Cita
        </a>

        <table class="table table-striped table-hover align-middle">
            <thead class="table-primary">
            <tr>
                <th>ID</th>
                <th>Paciente</th>
                <th>Médico</th>
                <th>Fecha</th>
                <th>Hora</th>
                <th>Estado</th>
                <th>Acciones</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="c : ${citas}">
                <td th:text="${c.idCita}"></td>
                <td th:text="${c.paciente.nombres + ' ' + c.paciente.apellidos}"></td>
                <td th:text="${c.medico.nombres + ' ' + c.medico.apellidos}"></td>
                <td th:text="${#temporals.format(c.fecha, 'dd/MM/yyyy')}"></td>
                <td th:text="${c.hora}"></td>
                <td>
    <span th:text="${c.estado}"
          th:classappend="${c.estado == 'Atendida' ? 'badge bg-success' : (c.estado == 'Cancelada' ? 'badge bg-danger' : 'badge bg-warning text-dark')}">
    </span>
                </td>
                <td>
                    <a th:href="@{'/citas/editar/' + ${c.idCita}}" class="btn btn-sm btn-outline-warning">
                        <i class="bi bi-pencil-square"></i>
                    </a>
                    <a th:href="@{'/citas/eliminar/' + ${c.idCita}}" class="btn btn-sm btn-outline-danger"
                       onclick="return confirm('¿Seguro que deseas eliminar esta cita?')">
                        <i class="bi bi-trash"></i>
                    </a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
